import pandas as pd
import plotly.express as px
import plotly.io as pio


data = {
    "Meta Data": {
        "1. Information": "Daily Prices (open, high, low, close) and Volumes",
        "2. Symbol": "RELIANCE.BSE",
        "3. Last Refreshed": "2025-02-07",
        "4. Output Size": "Compact",
        "5. Time Zone": "US/Eastern"
    },
    "Time Series (Daily)": {
        "2025-02-07": {
            "1. open": "1266.4500",
            "2. high": "1284.7500",
            "3. low": "1262.0000",
            "4. close": "1266.8500",
            "5. volume": "375026"
        },
        "2025-02-06": {
            "1. open": "1276.6000",
            "2. high": "1287.3500",
            "3. low": "1270.8000",
            "4. close": "1281.5500",
            "5. volume": "160168"
        },
        "2025-02-05": {
            "1. open": "1284.9500",
            "2. high": "1290.0000",
            "3. low": "1276.1500",
            "4. close": "1278.0500",
            "5. volume": "355650"
        },
        "2025-02-04": {
            "1. open": "1247.0500",
            "2. high": "1289.0000",
            "3. low": "1246.6500",
            "4. close": "1286.0000",
            "5. volume": "397483"
        },
        "2025-02-03": {
            "1. open": "1250.0000",
            "2. high": "1255.9000",
            "3. low": "1238.0000",
            "4. close": "1245.1500",
            "5. volume": "396687"
        },
        "2025-02-01": {
            "1. open": "1265.0000",
            "2. high": "1269.9500",
            "3. low": "1241.5000",
            "4. close": "1264.6500",
            "5. volume": "266300"
        },
        "2025-01-31": {
            "1. open": "1257.4000",
            "2. high": "1266.0000",
            "3. low": "1249.5000",
            "4. close": "1264.9000",
            "5. volume": "412707"
        },
        "2025-01-30": {
            "1. open": "1235.0000",
            "2. high": "1256.6000",
            "3. low": "1232.2500",
            "4. close": "1253.6000",
            "5. volume": "462230"
        },
        "2025-01-29": {
            "1. open": "1237.3000",
            "2. high": "1242.7500",
            "3. low": "1228.4500",
            "4. close": "1235.8000",
            "5. volume": "358148"
        },
        "2025-01-28": {
            "1. open": "1236.6000",
            "2. high": "1244.1500",
            "3. low": "1218.9000",
            "4. close": "1233.8000",
            "5. volume": "364260"
        },
        "2025-01-27": {
            "1. open": "1239.9000",
            "2. high": "1240.4500",
            "3. low": "1220.0500",
            "4. close": "1229.3000",
            "5. volume": "411760"
        },
        "2025-01-24": {
            "1. open": "1266.9000",
            "2. high": "1273.1000",
            "3. low": "1244.0000",
            "4. close": "1245.9000",
            "5. volume": "430797"
        },
        "2025-01-23": {
            "1. open": "1274.7500",
            "2. high": "1277.2500",
            "3. low": "1261.5500",
            "4. close": "1263.8500",
            "5. volume": "235409"
        },
        "2025-01-22": {
            "1. open": "1279.0000",
            "2. high": "1282.9000",
            "3. low": "1268.8000",
            "4. close": "1277.3000",
            "5. volume": "2201402"
        },
        "2025-01-21": {
            "1. open": "1310.0000",
            "2. high": "1312.8500",
            "3. low": "1269.5500",
            "4. close": "1272.9500",
            "5. volume": "1210468"
        },
        "2025-01-20": {
            "1. open": "1319.3500",
            "2. high": "1319.3500",
            "3. low": "1300.5500",
            "4. close": "1305.0000",
            "5. volume": "242236"
        },
        "2025-01-17": {
            "1. open": "1325.1000",
            "2. high": "1325.1000",
            "3. low": "1284.7000",
            "4. close": "1301.3000",
            "5. volume": "1514067"
        },
        "2025-01-16": {
            "1. open": "1260.2000",
            "2. high": "1275.0000",
            "3. low": "1251.4000",
            "4. close": "1268.7000",
            "5. volume": "391749"
        },
        "2025-01-15": {
            "1. open": "1247.0000",
            "2. high": "1256.7500",
            "3. low": "1242.1500",
            "4. close": "1252.3000",
            "5. volume": "287139"
        },
        "2025-01-14": {
            "1. open": "1240.0000",
            "2. high": "1255.0500",
            "3. low": "1227.3000",
            "4. close": "1238.5500",
            "5. volume": "837785"
        },
        "2025-01-13": {
            "1. open": "1230.0000",
            "2. high": "1245.1500",
            "3. low": "1225.6000",
            "4. close": "1240.0500",
            "5. volume": "810470"
        },
        "2025-01-10": {
            "1. open": "1255.9000",
            "2. high": "1256.7000",
            "3. low": "1236.1500",
            "4. close": "1242.3500",
            "5. volume": "498991"
        },
        "2025-01-09": {
            "1. open": "1267.9000",
            "2. high": "1269.4000",
            "3. low": "1248.0000",
            "4. close": "1255.0000",
            "5. volume": "262909"
        },
        "2025-01-08": {
            "1. open": "1251.2000",
            "2. high": "1270.7000",
            "3. low": "1245.0000",
            "4. close": "1264.7000",
            "5. volume": "881916"
        },
        "2025-01-07": {
            "1. open": "1221.6500",
            "2. high": "1243.4000",
            "3. low": "1221.4000",
            "4. close": "1240.9000",
            "5. volume": "512057"
        },
        "2025-01-06": {
            "1. open": "1251.5500",
            "2. high": "1261.7000",
            "3. low": "1215.3000",
            "4. close": "1218.2000",
            "5. volume": "782428"
        },
        "2025-01-03": {
            "1. open": "1247.7500",
            "2. high": "1262.3000",
            "3. low": "1235.6000",
            "4. close": "1251.3500",
            "5. volume": "502895"
        },
        "2025-01-02": {
            "1. open": "1220.7000",
            "2. high": "1244.5000",
            "3. low": "1220.2500",
            "4. close": "1241.6500",
            "5. volume": "529144"
        },
        "2025-01-01": {
            "1. open": "1218.9500",
            "2. high": "1226.2000",
            "3. low": "1212.1000",
            "4. close": "1221.6500",
            "5. volume": "380215"
        },
        "2024-12-31": {
            "1. open": "1210.4000",
            "2. high": "1219.0500",
            "3. low": "1206.4000",
            "4. close": "1215.4500",
            "5. volume": "444246"
        },
        "2024-12-30": {
            "1. open": "1219.6500",
            "2. high": "1223.3500",
            "3. low": "1208.6500",
            "4. close": "1210.9000",
            "5. volume": "314452"
        },
        "2024-12-27": {
            "1. open": "1216.6500",
            "2. high": "1227.6000",
            "3. low": "1216.6500",
            "4. close": "1220.9500",
            "5. volume": "653086"
        },
        "2024-12-26": {
            "1. open": "1224.6500",
            "2. high": "1228.0000",
            "3. low": "1214.4500",
            "4. close": "1216.6000",
            "5. volume": "556935"
        },
        "2024-12-24": {
            "1. open": "1231.9000",
            "2. high": "1233.4500",
            "3. low": "1221.4500",
            "4. close": "1223.5000",
            "5. volume": "268064"
        },
        "2024-12-23": {
            "1. open": "1217.2500",
            "2. high": "1227.0000",
            "3. low": "1213.1500",
            "4. close": "1222.1000",
            "5. volume": "3332773"
        },
        "2024-12-20": {
            "1. open": "1229.9500",
            "2. high": "1239.7500",
            "3. low": "1202.1000",
            "4. close": "1206.0000",
            "5. volume": "1166317"
        },
        "2024-12-19": {
            "1. open": "1239.9500",
            "2. high": "1244.9500",
            "3. low": "1229.4000",
            "4. close": "1230.6000",
            "5. volume": "424104"
        },
        "2024-12-18": {
            "1. open": "1243.4000",
            "2. high": "1259.9000",
            "3. low": "1241.7500",
            "4. close": "1253.0500",
            "5. volume": "260426"
        },
        "2024-12-17": {
            "1. open": "1262.6500",
            "2. high": "1262.6500",
            "3. low": "1242.6000",
            "4. close": "1245.1000",
            "5. volume": "639483"
        },
        "2024-12-16": {
            "1. open": "1275.0000",
            "2. high": "1281.6000",
            "3. low": "1266.8500",
            "4. close": "1268.0500",
            "5. volume": "465483"
        },
        "2024-12-13": {
            "1. open": "1265.0000",
            "2. high": "1275.1500",
            "3. low": "1240.0000",
            "4. close": "1273.3500",
            "5. volume": "1106984"
        },
        "2024-12-12": {
            "1. open": "1275.2000",
            "2. high": "1278.1000",
            "3. low": "1261.0500",
            "4. close": "1263.8500",
            "5. volume": "683512"
        },
        "2024-12-11": {
            "1. open": "1286.5000",
            "2. high": "1290.0000",
            "3. low": "1275.3500",
            "4. close": "1278.1000",
            "5. volume": "594409"
        },
        "2024-12-10": {
            "1. open": "1290.0000",
            "2. high": "1295.0000",
            "3. low": "1280.7500",
            "4. close": "1284.9500",
            "5. volume": "438986"
        },
        "2024-12-09": {
            "1. open": "1303.0000",
            "2. high": "1315.4500",
            "3. low": "1292.9000",
            "4. close": "1295.1500",
            "5. volume": "554024"
        },
        "2024-12-06": {
            "1. open": "1326.9000",
            "2. high": "1326.9000",
            "3. low": "1309.8000",
            "4. close": "1311.8000",
            "5. volume": "412701"
        },
        "2024-12-05": {
            "1. open": "1310.7500",
            "2. high": "1329.5000",
            "3. low": "1306.4000",
            "4. close": "1321.2000",
            "5. volume": "674847"
        },
        "2024-12-04": {
            "1. open": "1326.9500",
            "2. high": "1329.0000",
            "3. low": "1305.0000",
            "4. close": "1309.0000",
            "5. volume": "438492"
        },
        "2024-12-03": {
            "1. open": "1318.8500",
            "2. high": "1326.7000",
            "3. low": "1307.2500",
            "4. close": "1323.3500",
            "5. volume": "344673"
        },
        "2024-12-02": {
            "1. open": "1291.6500",
            "2. high": "1311.0500",
            "3. low": "1277.0000",
            "4. close": "1309.0500",
            "5. volume": "633384"
        },
        "2024-11-29": {
            "1. open": "1280.0000",
            "2. high": "1299.3000",
            "3. low": "1274.7500",
            "4. close": "1292.4500",
            "5. volume": "748891"
        },
        "2024-11-28": {
            "1. open": "1291.9500",
            "2. high": "1296.8000",
            "3. low": "1269.2500",
            "4. close": "1271.3500",
            "5. volume": "481819"
        },
        "2024-11-27": {
            "1. open": "1295.7500",
            "2. high": "1303.8000",
            "3. low": "1286.2000",
            "4. close": "1292.9000",
            "5. volume": "263573"
        },
        "2024-11-26": {
            "1. open": "1296.4500",
            "2. high": "1297.8500",
            "3. low": "1284.0000",
            "4. close": "1295.5500",
            "5. volume": "487024"
        },
        "2024-11-25": {
            "1. open": "1294.8000",
            "2. high": "1304.3500",
            "3. low": "1282.6500",
            "4. close": "1287.8000",
            "5. volume": "962533"
        },
        "2024-11-22": {
            "1. open": "1229.9000",
            "2. high": "1268.6500",
            "3. low": "1223.0500",
            "4. close": "1265.9500",
            "5. volume": "1055840"
        },
        "2024-11-21": {
            "1. open": "1247.0500",
            "2. high": "1247.0500",
            "3. low": "1217.7000",
            "4. close": "1223.2000",
            "5. volume": "491073"
        },
        "2024-11-19": {
            "1. open": "1259.0500",
            "2. high": "1281.0000",
            "3. low": "1235.4500",
            "4. close": "1241.3000",
            "5. volume": "397953"
        },
        "2024-11-18": {
            "1. open": "1266.5500",
            "2. high": "1273.1000",
            "3. low": "1244.0000",
            "4. close": "1260.6500",
            "5. volume": "609245"
        },
        "2024-11-14": {
            "1. open": "1254.5500",
            "2. high": "1272.5000",
            "3. low": "1252.2500",
            "4. close": "1267.7000",
            "5. volume": "799527"
        },
        "2024-11-13": {
            "1. open": "1269.5000",
            "2. high": "1275.0000",
            "3. low": "1249.7000",
            "4. close": "1252.2500",
            "5. volume": "525801"
        },
        "2024-11-12": {
            "1. open": "1275.0000",
            "2. high": "1289.4000",
            "3. low": "1269.0000",
            "4. close": "1273.1000",
            "5. volume": "592220"
        },
        "2024-11-11": {
            "1. open": "1282.6000",
            "2. high": "1285.9500",
            "3. low": "1266.3500",
            "4. close": "1273.0500",
            "5. volume": "695566"
        },
        "2024-11-08": {
            "1. open": "1302.6500",
            "2. high": "1302.8000",
            "3. low": "1278.0000",
            "4. close": "1284.0000",
            "5. volume": "927106"
        },
        "2024-11-07": {
            "1. open": "1322.1500",
            "2. high": "1324.0000",
            "3. low": "1303.2000",
            "4. close": "1305.6500",
            "5. volume": "529604"
        },
        "2024-11-06": {
            "1. open": "1311.8500",
            "2. high": "1328.4500",
            "3. low": "1300.3000",
            "4. close": "1325.5500",
            "5. volume": "873762"
        },
        "2024-11-05": {
            "1. open": "1293.7500",
            "2. high": "1309.3500",
            "3. low": "1286.1500",
            "4. close": "1305.9500",
            "5. volume": "410474"
        },
        "2024-11-04": {
            "1. open": "1337.0000",
            "2. high": "1338.6000",
            "3. low": "1285.1000",
            "4. close": "1302.0000",
            "5. volume": "1351832"
        },
        "2024-11-01": {
            "1. open": "1339.8500",
            "2. high": "1341.0000",
            "3. low": "1334.3000",
            "4. close": "1339.1000",
            "5. volume": "290860"
        },
        "2024-10-31": {
            "1. open": "1341.9000",
            "2. high": "1342.9000",
            "3. low": "1326.0500",
            "4. close": "1332.6000",
            "5. volume": "657958"
        },
        "2024-10-30": {
            "1. open": "1339.8000",
            "2. high": "1349.9000",
            "3. low": "1324.8000",
            "4. close": "1343.9500",
            "5. volume": "324322"
        },
        "2024-10-29": {
            "1. open": "1334.3000",
            "2. high": "1342.9000",
            "3. low": "1320.5000",
            "4. close": "1338.9500",
            "5. volume": "363374"
        },
        "2024-10-28": {
            "1. open": "1338.0000",
            "2. high": "1353.1500",
            "3. low": "1322.0000",
            "4. close": "1334.3000",
            "5. volume": "384134"
        },
        "2024-10-25": {
            "1. open": "1343.8500",
            "2. high": "1343.8500",
            "3. low": "1322.5000",
            "4. close": "1327.7250",
            "5. volume": "1470496"
        },
        "2024-10-24": {
            "1. open": "1337.5000",
            "2. high": "1343.8000",
            "3. low": "1323.5000",
            "4. close": "1339.9750",
            "5. volume": "867390"
        },
        "2024-10-23": {
            "1. open": "1340.5000",
            "2. high": "1357.5000",
            "3. low": "1335.5000",
            "4. close": "1338.8500",
            "5. volume": "849614"
        },
        "2024-10-22": {
            "1. open": "1369.9500",
            "2. high": "1375.9500",
            "3. low": "1340.4000",
            "4. close": "1343.6500",
            "5. volume": "378276"
        },
        "2024-10-21": {
            "1. open": "1369.8250",
            "2. high": "1374.0000",
            "3. low": "1358.0250",
            "4. close": "1369.1250",
            "5. volume": "394020"
        },
        "2024-10-18": {
            "1. open": "1353.3250",
            "2. high": "1368.0000",
            "3. low": "1341.6000",
            "4. close": "1358.7750",
            "5. volume": "1419472"
        },
        "2024-10-17": {
            "1. open": "1369.3500",
            "2. high": "1369.3500",
            "3. low": "1352.5000",
            "4. close": "1356.7250",
            "5. volume": "1662372"
        },
        "2024-10-16": {
            "1. open": "1343.9500",
            "2. high": "1364.2750",
            "3. low": "1338.0000",
            "4. close": "1354.0000",
            "5. volume": "635272"
        },
        "2024-10-15": {
            "1. open": "1359.4750",
            "2. high": "1372.0000",
            "3. low": "1340.6250",
            "4. close": "1343.9500",
            "5. volume": "1287148"
        },
        "2024-10-14": {
            "1. open": "1380.8500",
            "2. high": "1380.8500",
            "3. low": "1368.2500",
            "4. close": "1372.6000",
            "5. volume": "504838"
        },
        "2024-10-11": {
            "1. open": "1371.0000",
            "2. high": "1383.5250",
            "3. low": "1369.0000",
            "4. close": "1371.1000",
            "5. volume": "882564"
        },
        "2024-10-10": {
            "1. open": "1382.1750",
            "2. high": "1386.0000",
            "3. low": "1370.0000",
            "4. close": "1371.0250",
            "5. volume": "730900"
        },
        "2024-10-09": {
            "1. open": "1401.3500",
            "2. high": "1401.3500",
            "3. low": "1372.0750",
            "4. close": "1375.0500",
            "5. volume": "641084"
        },
        "2024-10-08": {
            "1. open": "1380.0000",
            "2. high": "1401.3750",
            "3. low": "1364.3000",
            "4. close": "1398.0250",
            "5. volume": "318502"
        },
        "2024-10-07": {
            "1. open": "1399.9750",
            "2. high": "1399.9750",
            "3. low": "1361.4500",
            "4. close": "1370.4750",
            "5. volume": "1122402"
        },
        "2024-10-04": {
            "1. open": "1407.0000",
            "2. high": "1417.9700",
            "3. low": "1383.0000",
            "4. close": "1386.9000",
            "5. volume": "2240234"
        },
        "2024-10-03": {
            "1. open": "1435.1500",
            "2. high": "1449.9700",
            "3. low": "1387.5000",
            "4. close": "1407.6200",
            "5. volume": "7089762"
        },
        "2024-10-01": {
            "1. open": "1481.3500",
            "2. high": "1489.0000",
            "3. low": "1463.0000",
            "4. close": "1464.9000",
            "5. volume": "1468420"
        },
        "2024-09-30": {
            "1. open": "3036.0000",
            "2. high": "3044.3000",
            "3. low": "2950.0000",
            "4. close": "2953.8000",
            "5. volume": "850746"
        },
        "2024-09-27": {
            "1. open": "3000.0000",
            "2. high": "3066.9000",
            "3. low": "2984.0000",
            "4. close": "3052.4000",
            "5. volume": "902318"
        },
        "2024-09-26": {
            "1. open": "2984.9500",
            "2. high": "3008.0000",
            "3. low": "2976.1000",
            "4. close": "3000.7000",
            "5. volume": "303052"
        },
        "2024-09-25": {
            "1. open": "2969.2500",
            "2. high": "2993.6000",
            "3. low": "2960.5000",
            "4. close": "2987.4500",
            "5. volume": "294796"
        },
        "2024-09-24": {
            "1. open": "2979.9500",
            "2. high": "3000.0000",
            "3. low": "2976.4000",
            "4. close": "2979.2500",
            "5. volume": "463610"
        },
        "2024-09-23": {
            "1. open": "2980.1000",
            "2. high": "3002.7500",
            "3. low": "2979.2000",
            "4. close": "2988.4000",
            "5. volume": "596992"
        },
        "2024-09-20": {
            "1. open": "2949.0000",
            "2. high": "2991.1500",
            "3. low": "2943.5500",
            "4. close": "2973.1000",
            "5. volume": "3406066"
        },
        "2024-09-19": {
            "1. open": "2930.9500",
            "2. high": "2953.0000",
            "3. low": "2911.2000",
            "4. close": "2939.3500",
            "5. volume": "121612"
        },
        "2024-09-18": {
            "1. open": "2940.0000",
            "2. high": "2964.0000",
            "3. low": "2922.0000",
            "4. close": "2926.2500",
            "5. volume": "394690"
        }
    }
}

# Sample dataset (Replace with the full dataset as needed)
time_series = {
    "2025-02-07": {"1. open": "1266.4500", "2. high": "1284.7500", "3. low": "1262.0000", "4. close": "1266.8500"},
    "2025-02-06": {"1. open": "1276.6000", "2. high": "1287.3500", "3. low": "1270.8000", "4. close": "1281.5500"},
    "2025-02-05": {"1. open": "1284.9500", "2. high": "1290.0000", "3. low": "1276.1500", "4. close": "1278.0500"},
    "2025-02-04": {"1. open": "1247.0500", "2. high": "1289.0000", "3. low": "1246.6500", "4. close": "1286.0000"},
    "2025-02-03": {"1. open": "1250.0000", "2. high": "1255.9000", "3. low": "1238.0000", "4. close": "1245.1500"}
}

# Convert time series data into a DataFrame
df = pd.DataFrame.from_dict(data["Time Series (Daily)"], orient='index')
df = df.rename(columns={
    "1. open": "Open",
    "2. high": "High",
    "3. low": "Low",
    "4. close": "Close"
})
df.index = pd.to_datetime(df.index)
df = df.sort_index()
df.reset_index(inplace=True)
df = df.rename(columns={"index": "Date"})

# Convert numerical values to float
df[["Open", "High", "Low", "Close"]] = df[["Open", "High", "Low", "Close"]].astype(float)

# Create the line graph with Plotly
fig = px.line(
    df,
    x="Date",
    y=["Open", "High", "Low", "Close"],
    title="Stock Price Line Graph",
    markers=True,
    labels={"value": "Stock Price", "variable": "Type"}
)

# Add range sliders and selectors for time filtering with black button font
fig.update_layout(
    xaxis=dict(
        rangeselector=dict(
            buttons=[
                dict(count=1, label="1D", step="day", stepmode="backward"),
                dict(count=5, label="5D", step="day", stepmode="backward"),
                dict(count=1, label="1M", step="month", stepmode="backward"),
                dict(count=6, label="6M", step="month", stepmode="backward"),
                dict(count=1, label="YTD", step="year", stepmode="todate"),
                dict(count=1, label="1Y", step="year", stepmode="backward"),
                dict(count=5, label="5Y", step="year", stepmode="backward"),
                dict(step="all", label="Max")
            ],
            font=dict(
                color="black",  # Font color for buttons
                size=12  # Adjust font size if needed
            ),
            bgcolor="white",  # Button background color
            activecolor="gray"  # Active button color
        ),
        rangeslider=dict(visible=True),
        type="date"
    ),
    yaxis_title="Stock Price",
    template="plotly_dark",
    plot_bgcolor="black",  # Black background for the plot area
    paper_bgcolor="black",  # Black background for the paper
    font=dict(color="white")  # White font for contrast
)

# Display the chart
pio.show(fig)
